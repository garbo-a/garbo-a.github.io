{"version":3,"sources":["scrollGlueDirectives.js"],"names":[],"mappings":"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","file":"scrollGlueDirectives-compiled.js","sourcesContent":["(function (angular, undefined) {\n    'use strict';\n\n    function createActivationState($parse, attr, scope) {\n        function unboundState(initValue) {\n            var activated = initValue;\n            return {\n                getValue: function () {\n                    return activated;\n                },\n                setValue: function (value) {\n                    activated = value;\n                }\n            };\n        }\n\n        function oneWayBindingState(getter, scope) {\n            return {\n                getValue: function () {\n                    return getter(scope);\n                },\n                setValue: function () {\n                }\n            }\n        }\n\n        function twoWayBindingState(getter, setter, scope) {\n            return {\n                getValue: function () {\n                    return getter(scope);\n                },\n                setValue: function (value) {\n                    if (value !== getter(scope)) {\n                        scope.$apply(function () {\n                            setter(scope, value);\n                        });\n                    }\n                }\n            };\n        }\n\n        if (attr !== \"\") {\n            var getter = $parse(attr);\n            if (getter.assign !== undefined) {\n                return twoWayBindingState(getter, getter.assign, scope);\n            } else {\n                return oneWayBindingState(getter, scope);\n            }\n        } else {\n            return unboundState(true);\n        }\n    }\n\n    function createDirective(module, attrName, direction) {\n        module.directive(attrName, ['$parse', '$window', '$timeout', function ($parse, $window, $timeout) {\n            return {\n                priority: 1,\n                restrict: 'A',\n                link: function (scope, $el, attrs) {\n                    var el = $el[0];\n                    var activationState = createActivationState($parse, attrs[attrName], scope);\n                    console.log(activationState + '');\n                    function scrollIfGlued() {\n                        $timeout(function () {\n                            if (activationState.getValue() || !direction.isAttached(el)) {\n                                direction.scroll(el);\n                            }\n                        }, 350, false);\n                    }\n\n                    function onScroll() {\n                        activationState.setValue(direction.isAttached(el));\n                    }\n\n                    scope.$watch(scrollIfGlued);\n\n                    scrollIfGlued();\n\n                    $window.addEventListener('resize', scrollIfGlued, false);\n\n                    $el.on('scroll', function () {\n                        $timeout(onScroll, 350, false);\n                    });\n\n                    // Remove listeners on directive destroy\n                    $el.on('$destroy', function () {\n                        $el.unbind('scroll', onScroll);\n                    });\n\n                    scope.$on('$destroy', function () {\n                        $window.removeEventListener('resize', scrollIfGlued, false);\n                    });\n                }\n            };\n        }]);\n    }\n\n    var bottom = {\n        isAttached: function (el) {\n            // + 1 catches off by one errors in chrome\n            return el.scrollTop + el.clientHeight + 1 >= el.scrollHeight;\n        },\n        scroll: function (el) {\n            el.scrollTop = el.scrollHeight;\n        }\n    };\n\n    var top = {\n        isAttached: function (el) {\n            return el.scrollTop <= 1;\n        },\n        scroll: function (el) {\n            el.scrollTop = 0;\n        }\n    };\n\n    var right = {\n        isAttached: function (el) {\n            return el.scrollLeft + el.clientWidth + 1 >= el.scrollWidth;\n        },\n        scroll: function (el) {\n            el.scrollLeft = el.scrollWidth;\n        }\n    };\n\n    var left = {\n        isAttached: function (el) {\n            return el.scrollLeft <= 1;\n        },\n        scroll: function (el) {\n            el.scrollLeft = 0;\n        }\n    };\n\n    var module = angular.module('luegg.directives', []);\n\n    createDirective(module, 'scrollGlue', bottom);\n    createDirective(module, 'scrollGlueTop', top);\n    createDirective(module, 'scrollGlueBottom', bottom);\n    createDirective(module, 'scrollGlueLeft', left);\n    createDirective(module, 'scrollGlueRight', right);\n}(angular));"]}