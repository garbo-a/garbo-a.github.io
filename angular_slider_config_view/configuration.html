<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="shortcut icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAiCAIAAACiBwxcAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjQ5N0E5MTYwNzdEMTExRTU5RjVCQkVCNzc5NDhEQjg1IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjQ5N0E5MTYxNzdEMTExRTU5RjVCQkVCNzc5NDhEQjg1Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NDk3QTkxNUU3N0QxMTFFNTlGNUJCRUI3Nzk0OERCODUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NDk3QTkxNUY3N0QxMTFFNTlGNUJCRUI3Nzk0OERCODUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz408EUNAAAE0ElEQVR42uxXa0wcVRS+987szM6wu7ClQAGXUp6ltE1EbdGamvT5x0dIVSRRozUS00hNf5hYTU20+kdNSLQPNG2aWlOt0ZRSpEabFGlLG0K1VRDoVpDyKE+XZdlld2buXM/sUrogAWx36x/Pj927Z8/c795zv/OdO5gxRnV9dMRDFR1hFH1jgizYrBYehsdOnt256xD1KYSLOrKq6mnZiw7t2cHDdvcfPHl9cBBbzUilTGfRQ8U8xzjc19B87HgtD4lWqIJEE0ZYEkULh/UooSLkUnWd6VTkAorCg4NgghjTfYGyV4tefnr96Nj4naMIAmfieSCQomqaRsElm4Wtb1acb2iFMSGYvxVMaWZqUkbG4ojsz+3xdfcNm0UhPysR4wnqJFplRCcSyofzTWeROeDDn596f1+ls7NLkqTVeZmlpY+WPLEW/OH84SN+lkcrz7z0+h6KkWCRNV2vPX/5bJPT4Uh8uGBpeBiJLOqwa7S84gQlSLbJUJs8R+SkWOodr/vp0rTICAMH/P6RATcAsslTg2+ODLlGowscF2tNX+ZA48qkB7KN/MqynCXTIiN8xrIs7d5R8oezp6Oj1yhd4DNmW0o2PPfUuugCgxXel/fdkV2fHjnV2tKFY8xFm+5/5rG1oihEHRgsLye9/N1XdJ1ixghvmjHmXwBrFAwkD6pdBzN4YyTS+IuD9gLGcTxPDB2ELAd/zTLbbP+B1rW193b3Dg70D17vHbox5L4x7OkbGdO8fhpQcYAyv4otIuIxkUUpRkpdYE2OtyYnxKWlJi5MiM9KT3akJMwHGJOgtvX0DZ6rbTr3c+sV57WOnqGBEZ/i8SPCDLLAZlhwEKoW+AzJoUGiYOWE9IlwllgpxR6TsTilMC/3wdVL16zJj5EljGcE5sjA8MgnB06Uf1bV0dyJeIJsZmTiCCGcVZx/ow6hewPK1e7A1Y7+74/XE1koLMx/Y/sW6BfQkRANB4YjkczvHKhWR70g2dw9dmN1t9Wb8cQuCAIiixyySbqq119qKdr2ESfwxCzqqjZ1xxhpfgWLgnENgRxGpF/AJJQZfLNKwEukavjm9YoPXykccvSuH9zUyQn6j+x/4LsIzJBxGWPs7mGCiFPK8yZ+ZW5GY+1vmlWYXkJQy6FSxsFxaHGTA/SP4MmAW0+hGcoywPLzMqF/sKG/3BVfnXa5x6YxHoQ+dJEwmWB5HHQIxah9FhRKLJhAozHVQA+00GMgcSaT0S0gDPaEw4Qs7F7AVmQ7XnxyHWbzSLLb4238pc1utxWsyJp0Otu7u7v6li/PSoiPC3n8AfVi4++SJK66NwfjudjD5rLevqFVm8tQ7Ebe8fj+w9Uh55eVtfbcYmTdsHL9tqa2P8Hj8/mfLfsAwlD85td27qU6nX3auVld8+OFhkYnt9CmjatfHP1hzOsD5959Na5Bl5Ac92tdc3XlBfBcab5WVXURxcYgs/h1ZV2bs/NOy2lJukPQMPUGUEC1J9rNwUtMWm4S8qkKODGxL7KBZ4HdZrZJyOtHHl+ixRJ/M/+3n2qwDz/+NvuhrZuK32pp757If09/8QvvpT/w/Nu7D3p9vpDzm5r6/EdKCzZuP33m8pxzzotcwRcrCo0Zh7Vy443eKEd+aonqQXrPnci/BRgAbE+gRmkxXIoAAAAASUVORK5CYII="/>
    <link href='https://fonts.googleapis.com/css?family=Roboto:400,500,700,300' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="stylesheets/normalize.css"/>
    <link rel="stylesheet" type="text/css" href="stylesheets/config.css">
    <script src="javascripts/angular.min.js"></script>
    <script>
        var b, i = -1;


        angular.module('app', [])
                .controller('sliderCntl', ['$scope', function ($scope) {

                    //$scope.counter;
                    $scope.formData = {};
                    $scope.formData.slides = [];

                    getContent();

                    function getContent() {
                        var config = null;

                        try {
                            config = JSON.parse(localStorage.getItem('sliderConfig'));
                        } catch (e) {
                            localStorage.clear();
                        }
                        console.log(config);

                        setTimeout(function () {
                            $scope.$apply(function () {
//                        // make sure config has default value
                                if (!config) {
                                    config = {};
                                } else {
                                    //get default settings of the slider
                                    $scope.formData.interval = config.interval;
                                    $scope.formData.timeout = config.timeout;
                                    $scope.formData.slides = config.slides;
                                    console.log($scope.formData.slides);
                                }
                            });
                        }, 1000);

                        function Storage() {
                            this.store = function (slides) {
                                localStorage.setItem('sliderConfig', JSON.stringify(slides));
                            };
                            this.load = function () {
                                var slides = {};
                                try {
                                    slides = JSON.parse(localStorage.getItem('sliderConfig'));
                                } catch (e) {
                                    localStorage.clear();
                                }
                                return slides;
                            };
                        }


                        $scope.sendForm = function (data) {
                            var submit = confirm("Did you set ALL the color themes and slider positions?");
                            if (submit) {
                                //config['data'] = data;
                                localStorage.setItem('sliderConfig', JSON.stringify(data));
                                console.log(data);
                            }
                        };

                        $scope.addOne = function () {
                            i++;
                            var a = {};
                            $scope.formData.slides.unshift(a);
                        };

                        $scope.deleteSlide = function (e) {
                            console.log(e);
                            var submit = confirm("Are you sure you want to delete this slide?");
                            if (submit) {
                                //deleting the slide
                                $scope.formData.slides.splice(+e.target.dataset.index, 1);
                            }
                        };

                    }
                }])
                .directive('slider', function () {
                    return {
                        restrict: 'A',
                        //templateUrl: 'inputs.html',
                        scope: {
                            config: "="
                        },
                        controller: 'sliderCntl',
                        link: function (scope, elem, attr, ctrl) {
                            //console.log(ctrl)
                        }
                    }
                })
    </script>
</head>
<body>

<div class="config-wrapper" ng-app="app">
    <h2>Configure Slider Widget</h2>

    <form class="slider-form" ng-controller="sliderCntl" ng-submit="sendForm(formData)" name="configForm">

        <!--submit form-->
        <button class="submit-button" type="submit">Save changes</button>

        <!-- set interval & timeout-->
        <label><p>Set a slider interval, in seconds. It can be an integer or a broken number separated by a dot</p>

            <p><input type="text" ng-model="formData.interval" value="{{formData.interval}}"
                      placeholder="{{formData.interval}}"
                      maxlength="4">
            </p>
        </label>

        <label><p>Set a slider timeout after the user hovers over image, in seconds.</p>

            <p><input type="text" ng-model="formData.timeout" value="{{formData.timeout}}"
                      placeholder="{{formData.timeout}}"
                      maxlength="4">
            </p>
        </label>
        <!--add new button-->
        <input class="add_slide" type="button" ng-click="addOne()" value="+">

        <div class="repeat-block" ng-repeat="config in formData.slides track by $index" config="config">
            <h4>Select & set color theme</h4>
            <!--set color theme of each slide-->
            <div class="theme-colors">

                <label id="blue"><input name="color-{{$index}}" type="radio" ng-model="config.color" value="blue">blue
                    theme</label>

                <label id="green"><input name="color-{{$index}}" type="radio" ng-model="config.color" value="green">green
                    theme</label>

                <label id="orange"><input name="color-{{$index}}" type="radio" ng-model="config.color" value="orange">orange
                    theme</label>

                <label id="purple"><input name="color-{{$index}}" type="radio" ng-model="config.color" value="purple">purple
                    theme</label>

                <label id="red"><input name="color-{{$index}}" type="radio" ng-model="config.color" value="red">red
                    theme</label>

                <label id="none"><input name="color-{{$index}}" type="radio" ng-model="config.color" value="none">images
                    only theme</label>
            </div>
            <h4>Select & set slider position</h4>

            <!-- set position of each slide-->
            <div class="slider-position">
                <label><input id="left-{{$index}}" name="position" type="radio" ng-model="config.position" value="left">
                    Set slider position LEFT <<< </label>

                <label><input name="position-{{$index}}" type="radio" ng-model="config.position" value="right">
                    Set slider position RIGHT >>> </label>
            </div>


            <!--putting contents and links of each slide-->

            <label class="config__string">
                <p>Title for this slide, max 30 symbols</p>

                <p><input type="text" ng-model="config.title" value="{{config.title}}" placeholder="{{config.title}}"
                          maxlength="30">
                </p>
            </label>

            <label class="config__string">
                <p>Description for this title, max 120 symbols</p>

                <p><input type="text" ng-model="config.subtitle" value="{{config.subtitle}}"
                          placeholder="{{config.subtitle}}" maxlength="120"></p>
            </label>

            <label class="config__string">
                <p>Action, max 20 symbols ("Learn more..." as default)</p>

                <p><input class="action" type="text" ng-model="config.action" value="{{config.action}}"
                          placeholder="{{config.action}}" maxlength="20"></p>
            </label>

            <label class="config__string">
                <p>Set destination URL</p>

                <p><input type="text" ng-model="config.titleUrl" value="{{config.titleUrl}}"
                          placeholder="{{config.titleUrl}}"></p>
            </label>

            <label class="config__string">
                <p>Set background image URL</p>

                <p><input type="text" ng-model="config.imageUrl" value="{{config.imageUrl}}"
                          placeholder="{{config.imageUrl}}"></p>
            </label>

            <!-- delete this slide button-->
            <input class="delete-button" type="button" ng-click="deleteSlide($event)" data-index="{{$index}}"
                   value="-">

        </div>

    </form>
</div>

</body>
</html>