{"version":3,"sources":["scrollGlueDirectives-compiled.js"],"names":[],"mappings":"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","file":"scrollGlueDirectives-compiled-compiled.js","sourcesContent":["'use strict';\n\n(function (angular, undefined) {\n    'use strict';\n\n    function createActivationState($parse, attr, scope) {\n        function unboundState(initValue) {\n            var activated = initValue;\n            return {\n                getValue: function getValue() {\n                    return activated;\n                },\n                setValue: function setValue(value) {\n                    activated = value;\n                }\n            };\n        }\n\n        function oneWayBindingState(getter, scope) {\n            return {\n                getValue: function getValue() {\n                    return getter(scope);\n                },\n                setValue: function setValue() {}\n            };\n        }\n\n        function twoWayBindingState(getter, setter, scope) {\n            return {\n                getValue: function getValue() {\n                    return getter(scope);\n                },\n                setValue: function setValue(value) {\n                    if (value !== getter(scope)) {\n                        scope.$apply(function () {\n                            setter(scope, value);\n                        });\n                    }\n                }\n            };\n        }\n\n        if (attr !== \"\") {\n            var getter = $parse(attr);\n            if (getter.assign !== undefined) {\n                return twoWayBindingState(getter, getter.assign, scope);\n            } else {\n                return oneWayBindingState(getter, scope);\n            }\n        } else {\n            return unboundState(true);\n        }\n    }\n\n    function createDirective(module, attrName, direction) {\n        module.directive(attrName, ['$parse', '$window', '$timeout', function ($parse, $window, $timeout) {\n            return {\n                priority: 1,\n                restrict: 'A',\n                link: function link(scope, $el, attrs) {\n                    var el = $el[0];\n                    var activationState = createActivationState($parse, attrs[attrName], scope);\n                    console.log(activationState + '');\n                    function scrollIfGlued() {\n                        $timeout(function () {\n                            if (activationState.getValue() || !direction.isAttached(el)) {\n                                direction.scroll(el);\n                            }\n                        }, 350, false);\n                    }\n\n                    function onScroll() {\n                        activationState.setValue(direction.isAttached(el));\n                    }\n\n                    scope.$watch(scrollIfGlued);\n\n                    scrollIfGlued();\n\n                    $window.addEventListener('resize', scrollIfGlued, false);\n\n                    $el.on('scroll', function () {\n                        $timeout(onScroll, 350, false);\n                    });\n\n                    // Remove listeners on directive destroy\n                    $el.on('$destroy', function () {\n                        $el.unbind('scroll', onScroll);\n                    });\n\n                    scope.$on('$destroy', function () {\n                        $window.removeEventListener('resize', scrollIfGlued, false);\n                    });\n                }\n            };\n        }]);\n    }\n\n    var bottom = {\n        isAttached: function isAttached(el) {\n            // + 1 catches off by one errors in chrome\n            return el.scrollTop + el.clientHeight + 1 >= el.scrollHeight;\n        },\n        scroll: function scroll(el) {\n            el.scrollTop = el.scrollHeight;\n        }\n    };\n\n    var top = {\n        isAttached: function isAttached(el) {\n            return el.scrollTop <= 1;\n        },\n        scroll: function scroll(el) {\n            el.scrollTop = 0;\n        }\n    };\n\n    var right = {\n        isAttached: function isAttached(el) {\n            return el.scrollLeft + el.clientWidth + 1 >= el.scrollWidth;\n        },\n        scroll: function scroll(el) {\n            el.scrollLeft = el.scrollWidth;\n        }\n    };\n\n    var left = {\n        isAttached: function isAttached(el) {\n            return el.scrollLeft <= 1;\n        },\n        scroll: function scroll(el) {\n            el.scrollLeft = 0;\n        }\n    };\n\n    var module = angular.module('luegg.directives', []);\n\n    createDirective(module, 'scrollGlue', bottom);\n    console.log('bottom directive created');\n    createDirective(module, 'scrollGlueTop', top);\n    createDirective(module, 'scrollGlueBottom', bottom);\n    createDirective(module, 'scrollGlueLeft', left);\n    createDirective(module, 'scrollGlueRight', right);\n})(angular);\n\n//# sourceMappingURL=scrollGlueDirectives-compiled.js.map"]}