{"version":3,"sources":["weather.js"],"names":[],"mappings":"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","file":"weather-compiled.js","sourcesContent":["function Weather() {\n    this.findCity = function (name) {\n        Ajax.getJSON('https://geocode-maps.yandex.ru/1.x/?format=json&geocode=' + name.trim(), function (geoData) {\n            console.log(geoData);\n            var objects = geoData.response.GeoObjectCollection.featureMember.map(function (fm) {\n                var go = fm.GeoObject,\n                    coordinates = go.Point.pos.split(' ');\n                return {\n                    name: go.name,\n                    description: go.description,\n                    kind: go.metaDataProperty.GeocoderMetaData.kind,\n                    longitude: coordinates[0].slice(0, 4),\n                    latitude: coordinates[1].slice(0, 4)\n                };\n            }).filter(function (o) {\n                return o.kind === 'locality';\n            });\n\n            document.querySelector('.weather__cities').innerHTML = Templates.Cities.render({\n                cities: objects\n            });\n        });\n    };\n\n    this.getWeather = function (lat, lon) {\n        var objectCity = document.querySelectorAll('.city');\n\n        for (var i = 0; i < objectCity.length; i++) {\n            var currElem = objectCity[i];\n\n            currElem.onclick = function (event) {\n                var weatherUrlAjax = 'http://api.openweathermap.org/data/2.5/weather?appid=53c50defe390864e563ff1aa30410810&lat=' + event.currentTarget.dataset.latitude + '&lon=' + event.currentTarget.dataset.longitude + '&units=metric';\n                //console.log(weatherUrlAjax);\n                Ajax.getJSON(weatherUrlAjax, function (weatherData) {\n                    console.log(weatherData);\n                    var weatherObj = {};\n                    weatherObj.name = weatherData.name;\n                    weatherObj.icon = weatherData.weather[0].id;\n                    weatherObj.main = weatherData.weather[0].main;\n                    weatherObj.temp = weatherData.main.temp;\n                    weatherObj.press = weatherData.main.pressure;\n                    weatherObj.humidity = weatherData.main.humidity;\n                    document.querySelector('.weather__info').innerHTML = Templates.Weather.render({\n                        weather: weatherObj\n                    });\n\n                });\n            }\n        }\n\n    };\n}\n\nvar Templates = {\n    Cities: Hogan.compile($('.templates__city').innerHTML),\n    Weather: Hogan.compile($('.templates__weather').innerHTML)\n};\n\nvar Ajax = {\n    getJSON: function (url, callback) {\n        var xhr = new XMLHttpRequest();\n        xhr.open('GET', url, true);\n        xhr.send();\n        xhr.onreadystatechange = function () {\n            if (xhr.readyState != 4) return;\n            callback(JSON.parse(xhr.responseText));\n\n        };\n        //fetch(url).then(function(response) {\n        //    return response.json();\n        //}).then(callback);\n    }\n};\n"]}