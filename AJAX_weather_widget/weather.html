<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Weather</title>
    <link rel="stylesheet" href="css/weather.css"/>
    <link href="css/owfont-regular.min.css" rel="stylesheet" type="text/css">
</head>
<body>
<div class="weather">
    <form action="" name="weather__form" onsubmit="return false">
        <input type="text" name="cityName" class="weather__input" autofocus placeholder="Введите город..."/>
    </form>
    <div class="weather__cities"></div>
    <div class="weather__info"></div>
</div>

<script type="text/x-handlebars-template" class="templates__weather">
    {{#weather}}
        <div class="weather__block">
            <i class="weather__icon owf owf-{{icon}}"></i>
            <div class="weather__cities">{{name}}</div>
            <div>{{main}}</div>
            <div class="weather__temperature">{{temp}} &#8451;</div>
            <div class="weather__pressure">{{press}} kPa</div>
            <div class="weather__humidity"><span>Humidity</span>
                <progress  value="{{humidity}}" max="100"></progress>
            </div>

        </div>
    {{/weather}}
</script>

<script type="text/x-handlebars-template" class="templates__city">
    {{#cities}}
    <div tabindex="1" class="city" data-latitude="{{latitude}}" data-longitude="{{longitude}}">
        <span class="city__name">{{name}}</span><span class="city__description">{{description}}</span>
    </div>
    {{/cities}}
</script>

<script src="http://twitter.github.com/hogan.js/builds/3.0.1/hogan-3.0.1.min.js"></script>
<script>
    var $ = document.querySelector.bind(document);
</script>
<script src="weather.js"></script>
<script>
    var weather = new Weather();
    var inputNode = document.forms.weather__form.elements.cityName;

    inputNode.addEventListener('input', function(){

        weather.findCity(this.value);
        setTimeout(weather.getWeather, 500);
    });

</script>
</body>
</html>